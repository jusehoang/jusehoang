<div class="change-password">
  <nz-card>
    <h2>Đổi mật khẩu</h2>
    <form [formGroup]="form">
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="oldPassword">Mật khẩu cũ</nz-form-label>
        <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="Mật khẩu không được để trống!">
          <nz-input-group [nzSuffix]="suffixTemplate">
            <input
              [type]="passwordVisible ? 'text' : 'password'"
              nz-input
              formControlName="oldPassword"
            />
          </nz-input-group>
          <ng-template #suffixTemplate>
            <i nz-icon [nzType]="passwordVisible ? 'eye-invisible' : 'eye'" (click)="passwordVisible = !passwordVisible" (ngModelChange)="validateConfirmPassword()"></i>
          </ng-template>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="password">Mật khẩu mới</nz-form-label>
        <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="Mật khẩu không được để trống!">
          <nz-input-group [nzSuffix]="suffixTemplate1">
            <input
              [type]="passwordVisible1 ? 'text' : 'password'"
              nz-input
              formControlName="password"
            />
          </nz-input-group>
          <ng-template #suffixTemplate1>
            <i nz-icon [nzType]="passwordVisible1 ? 'eye-invisible' : 'eye'" (click)="passwordVisible1 = !passwordVisible1" (ngModelChange)="validateConfirmPassword()"></i>
          </ng-template>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="confirmPassword">Nhập lại Mật khẩu</nz-form-label>
        <nz-form-control [nzSm]="18" [nzXs]="24" [nzErrorTip]="passwordErrorTpl">
          <nz-input-group [nzSuffix]="suffixTemplate2">
            <input
              [type]="passwordVisible2 ? 'text' : 'password'"
              nz-input
              formControlName="confirmPassword"
            />
          </nz-input-group>
          <ng-template #passwordErrorTpl let-control>
            <ng-container *ngIf="control.hasError('required')">Please confirm your password!</ng-container>
          <ng-container *ngIf="control.hasError('confirm')">Password is inconsistent!</ng-container>
          </ng-template>
          <ng-template #suffixTemplate2>
            <i nz-icon [nzType]="passwordVisible2 ? 'eye-invisible' : 'eye'" (click)="passwordVisible2 = !passwordVisible2"></i>
          </ng-template>
        </nz-form-control>
      </nz-form-item>
      <button nz-button class="login-form-button" (click)="doChangePassword($event)" [nzType]="'primary'">Đổi mật khẩu</button>
      <button nz-button class="login-form-button cancel" [nzType]="'primary'" nzDanger>Hủy</button>
    </form>
  </nz-card>
</div>

